// Do NOT edit this file. It was automatically generated by https://github.com/aviate-labs/agent-go.
package icpledger_test

import (
	"github.com/aviate-labs/agent-go"
	"github.com/aviate-labs/agent-go/candid/idl"
	"github.com/aviate-labs/agent-go/mock"
	"github.com/aviate-labs/agent-go/principal"
	"net/http/httptest"
	"net/url"
	"testing"

	"github.com/aviate-labs/agent-go/ic/icpledger"
)

// Test_AccountBalance tests the "account_balance" method on the "icpledger" canister.
func Test_AccountBalance(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "account_balance",
			Arguments: []any{new(icpledger.AccountBalanceArgs)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{icpledger.Tokens{
					*new(uint64),
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.AccountBalanceArgs{
		*new([]byte),
	}
	if _, err := a.AccountBalance(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_AccountBalanceDfx tests the "account_balance_dfx" method on the "icpledger" canister.
func Test_AccountBalanceDfx(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "account_balance_dfx",
			Arguments: []any{new(icpledger.AccountBalanceArgsDfx)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{icpledger.Tokens{
					*new(uint64),
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.AccountBalanceArgsDfx{
		*new(string),
	}
	if _, err := a.AccountBalanceDfx(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_AccountIdentifier tests the "account_identifier" method on the "icpledger" canister.
func Test_AccountIdentifier(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "account_identifier",
			Arguments: []any{new(icpledger.Account)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{*new([]byte)}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.Account{
		*new(principal.Principal),
		*new(*icpledger.SubAccount),
	}
	if _, err := a.AccountIdentifier(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_Archives tests the "archives" method on the "icpledger" canister.
func Test_Archives(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "archives",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{icpledger.Archives{
					[]icpledger.Archive{{
						*new(principal.Principal),
					}},
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Archives(); err != nil {
		t.Fatal(err)
	}

}

// Test_Decimals tests the "decimals" method on the "icpledger" canister.
func Test_Decimals(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "decimals",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{struct {
					Decimals uint32 `ic:"decimals" json:"decimals"`
				}{
					*new(uint32),
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Decimals(); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc1BalanceOf tests the "icrc1_balance_of" method on the "icpledger" canister.
func Test_Icrc1BalanceOf(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc1_balance_of",
			Arguments: []any{new(icpledger.Account)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{idl.NewNat(uint(0))}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.Account{
		*new(principal.Principal),
		*new(*icpledger.SubAccount),
	}
	if _, err := a.Icrc1BalanceOf(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc1Decimals tests the "icrc1_decimals" method on the "icpledger" canister.
func Test_Icrc1Decimals(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc1_decimals",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{*new(uint8)}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Icrc1Decimals(); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc1Fee tests the "icrc1_fee" method on the "icpledger" canister.
func Test_Icrc1Fee(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc1_fee",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{idl.NewNat(uint(0))}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Icrc1Fee(); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc1Metadata tests the "icrc1_metadata" method on the "icpledger" canister.
func Test_Icrc1Metadata(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc1_metadata",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{[]struct {
					Field0 string          `ic:"0" json:"0"`
					Field1 icpledger.Value `ic:"1" json:"1"`
				}{

					{
						*new(string),
						icpledger.Value{
							Nat: idl.Ptr(idl.NewNat(uint(0))),
						},
					}}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Icrc1Metadata(); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc1MintingAccount tests the "icrc1_minting_account" method on the "icpledger" canister.
func Test_Icrc1MintingAccount(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc1_minting_account",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{*new(*icpledger.Account)}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Icrc1MintingAccount(); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc1Name tests the "icrc1_name" method on the "icpledger" canister.
func Test_Icrc1Name(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc1_name",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{*new(string)}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Icrc1Name(); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc1SupportedStandards tests the "icrc1_supported_standards" method on the "icpledger" canister.
func Test_Icrc1SupportedStandards(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc1_supported_standards",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{[]struct {
					Name string `ic:"name" json:"name"`
					Url  string `ic:"url" json:"url"`
				}{

					{
						*new(string),
						*new(string),
					}}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Icrc1SupportedStandards(); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc1Symbol tests the "icrc1_symbol" method on the "icpledger" canister.
func Test_Icrc1Symbol(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc1_symbol",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{*new(string)}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Icrc1Symbol(); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc1TotalSupply tests the "icrc1_total_supply" method on the "icpledger" canister.
func Test_Icrc1TotalSupply(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc1_total_supply",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{idl.NewNat(uint(0))}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Icrc1TotalSupply(); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc1Transfer tests the "icrc1_transfer" method on the "icpledger" canister.
func Test_Icrc1Transfer(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc1_transfer",
			Arguments: []any{new(icpledger.TransferArg)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{icpledger.Icrc1TransferResult{
					Ok: idl.Ptr(idl.NewNat(uint(0))),
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.TransferArg{
		*new(*icpledger.SubAccount),
		icpledger.Account{
			*new(principal.Principal),
			*new(*icpledger.SubAccount),
		},
		idl.NewNat(uint(0)),
		*new(*icpledger.Icrc1Tokens),
		*new(*[]byte),
		*new(*icpledger.Icrc1Timestamp),
	}
	if _, err := a.Icrc1Transfer(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc2Allowance tests the "icrc2_allowance" method on the "icpledger" canister.
func Test_Icrc2Allowance(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc2_allowance",
			Arguments: []any{new(icpledger.AllowanceArgs)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{icpledger.Allowance{
					idl.NewNat(uint(0)),
					*new(*icpledger.Icrc1Timestamp),
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.AllowanceArgs{
		icpledger.Account{
			*new(principal.Principal),
			*new(*icpledger.SubAccount),
		},
		icpledger.Account{
			*new(principal.Principal),
			*new(*icpledger.SubAccount),
		},
	}
	if _, err := a.Icrc2Allowance(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc2Approve tests the "icrc2_approve" method on the "icpledger" canister.
func Test_Icrc2Approve(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc2_approve",
			Arguments: []any{new(icpledger.ApproveArgs)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{icpledger.ApproveResult{
					Ok: idl.Ptr(idl.NewNat(uint(0))),
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.ApproveArgs{
		*new(*icpledger.SubAccount),
		icpledger.Account{
			*new(principal.Principal),
			*new(*icpledger.SubAccount),
		},
		idl.NewNat(uint(0)),
		*new(*icpledger.Icrc1Tokens),
		*new(*icpledger.Icrc1Timestamp),
		*new(*icpledger.Icrc1Tokens),
		*new(*[]byte),
		*new(*icpledger.Icrc1Timestamp),
	}
	if _, err := a.Icrc2Approve(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_Icrc2TransferFrom tests the "icrc2_transfer_from" method on the "icpledger" canister.
func Test_Icrc2TransferFrom(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "icrc2_transfer_from",
			Arguments: []any{new(icpledger.TransferFromArgs)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{icpledger.TransferFromResult{
					Ok: idl.Ptr(idl.NewNat(uint(0))),
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.TransferFromArgs{
		*new(*icpledger.SubAccount),
		icpledger.Account{
			*new(principal.Principal),
			*new(*icpledger.SubAccount),
		},
		icpledger.Account{
			*new(principal.Principal),
			*new(*icpledger.SubAccount),
		},
		idl.NewNat(uint(0)),
		*new(*icpledger.Icrc1Tokens),
		*new(*[]byte),
		*new(*icpledger.Icrc1Timestamp),
	}
	if _, err := a.Icrc2TransferFrom(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_Name tests the "name" method on the "icpledger" canister.
func Test_Name(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "name",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{struct {
					Name string `ic:"name" json:"name"`
				}{
					*new(string),
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Name(); err != nil {
		t.Fatal(err)
	}

}

// Test_QueryBlocks tests the "query_blocks" method on the "icpledger" canister.
func Test_QueryBlocks(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "query_blocks",
			Arguments: []any{new(icpledger.GetBlocksArgs)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{icpledger.QueryBlocksResponse{
					*new(uint64),
					*new(*[]byte),
					[]icpledger.Block{{
						*new(*[]byte),
						icpledger.Transaction{
							*new(uint64),
							*new(*[]byte),
							*new(*icpledger.Operation),
							icpledger.TimeStamp{
								*new(uint64),
							},
						},
						icpledger.TimeStamp{
							*new(uint64),
						},
					}},
					*new(uint64),
					[]icpledger.ArchivedBlocksRange{{
						*new(uint64),
						*new(uint64),
						*new(struct { /* NOT SUPPORTED */
						}),
					}},
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.GetBlocksArgs{
		*new(uint64),
		*new(uint64),
	}
	if _, err := a.QueryBlocks(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_QueryEncodedBlocks tests the "query_encoded_blocks" method on the "icpledger" canister.
func Test_QueryEncodedBlocks(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "query_encoded_blocks",
			Arguments: []any{new(icpledger.GetBlocksArgs)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{icpledger.QueryEncodedBlocksResponse{
					*new(*[]byte),
					[][]byte{*new([]byte)},
					*new(uint64),
					*new(uint64),
					[]icpledger.ArchivedEncodedBlocksRange{{
						*new(struct { /* NOT SUPPORTED */
						}),
						*new(uint64),
						*new(uint64),
					}},
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.GetBlocksArgs{
		*new(uint64),
		*new(uint64),
	}
	if _, err := a.QueryEncodedBlocks(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_SendDfx tests the "send_dfx" method on the "icpledger" canister.
func Test_SendDfx(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "send_dfx",
			Arguments: []any{new(icpledger.SendArgs)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{*new(uint64)}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.SendArgs{
		*new(uint64),
		icpledger.Tokens{
			*new(uint64),
		},
		icpledger.Tokens{
			*new(uint64),
		},
		*new(*icpledger.SubAccount),
		*new(string),
		*new(*icpledger.TimeStamp),
	}
	if _, err := a.SendDfx(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_Symbol tests the "symbol" method on the "icpledger" canister.
func Test_Symbol(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "symbol",
			Arguments: []any{},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{struct {
					Symbol string `ic:"symbol" json:"symbol"`
				}{
					*new(string),
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	if _, err := a.Symbol(); err != nil {
		t.Fatal(err)
	}

}

// Test_Transfer tests the "transfer" method on the "icpledger" canister.
func Test_Transfer(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "transfer",
			Arguments: []any{new(icpledger.TransferArgs)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{icpledger.TransferResult{
					Ok: new(uint64),
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.TransferArgs{
		*new(uint64),
		icpledger.Tokens{
			*new(uint64),
		},
		icpledger.Tokens{
			*new(uint64),
		},
		*new(*icpledger.SubAccount),
		*new([]byte),
		*new(*icpledger.TimeStamp),
	}
	if _, err := a.Transfer(a0); err != nil {
		t.Fatal(err)
	}

}

// Test_TransferFee tests the "transfer_fee" method on the "icpledger" canister.
func Test_TransferFee(t *testing.T) {
	a, err := newAgent([]mock.Method{
		{
			Name:      "transfer_fee",
			Arguments: []any{new(icpledger.TransferFeeArg)},
			Handler: func(request mock.Request) ([]any, error) {
				return []any{icpledger.TransferFee{
					icpledger.Tokens{
						*new(uint64),
					},
				}}, nil
			},
		},
	})
	if err != nil {
		t.Fatal(err)
	}

	var a0 = icpledger.TransferFeeArg{}
	if _, err := a.TransferFee(a0); err != nil {
		t.Fatal(err)
	}

}

// newAgent creates a new agent with the given (mock) methods.
// Runs a mock replica in the background.
func newAgent(methods []mock.Method) (*icpledger.Agent, error) {
	replica := mock.NewReplica()
	canisterId := principal.Principal{Raw: []byte("icpledger")}
	replica.AddCanister(canisterId, methods)
	s := httptest.NewServer(replica)
	u, _ := url.Parse(s.URL)
	a, err := icpledger.NewAgent(canisterId, agent.Config{
		ClientConfig: &agent.ClientConfig{Host: u},
		FetchRootKey: true,
	})
	if err != nil {
		return nil, err
	}
	return a, nil
}
